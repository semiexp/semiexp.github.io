(function(){"use strict";var at=function(){var R=self.location.href;return function(e){e=e||{};var e=typeof e<"u"?e:{},K,S;e.ready=new Promise(function(t,n){K=t,S=n});var A={},l;for(l in e)e.hasOwnProperty(l)&&(A[l]=e[l]);var x=[],j="./this.program",W=function(t,n){throw n},N=!1,F=!1;N=typeof window=="object",F=typeof importScripts=="function",typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var h="";function tt(t){return e.locateFile?e.locateFile(t,h):h+t}var B;(N||F)&&(F?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),R&&(h=R),h.indexOf("blob:")!==0?h=h.substr(0,h.lastIndexOf("/")+1):h="",F&&(B=function(n){var r=new XMLHttpRequest;return r.open("GET",n,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}));var _=e.print||console.log.bind(console),p=e.printErr||console.warn.bind(console);for(l in A)A.hasOwnProperty(l)&&(e[l]=A[l]);A=null,e.arguments&&(x=e.arguments),e.thisProgram&&(j=e.thisProgram),e.quit&&(W=e.quit);var v=0,m=function(t){v=t},P=function(){return v},C;e.wasmBinary&&(C=e.wasmBinary);var O;e.noExitRuntime&&(O=e.noExitRuntime),typeof WebAssembly!="object"&&L("no native wasm support detected");var M,nt=!1,st=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ft(t,n,r){for(var i=n+r,o=n;t[o]&&!(o>=i);)++o;if(o-n>16&&t.subarray&&st)return st.decode(t.subarray(n,o));for(var f="";n<o;){var s=t[n++];if(!(s&128)){f+=String.fromCharCode(s);continue}var a=t[n++]&63;if((s&224)==192){f+=String.fromCharCode((s&31)<<6|a);continue}var c=t[n++]&63;if((s&240)==224?s=(s&15)<<12|a<<6|c:s=(s&7)<<18|a<<12|c<<6|t[n++]&63,s<65536)f+=String.fromCharCode(s);else{var I=s-65536;f+=String.fromCharCode(55296|I>>10,56320|I&1023)}}return f}function X(t,n){return t?ft(G,t,n):""}function St(t,n,r,i){if(!(i>0))return 0;for(var o=r,f=r+i-1,s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a>=55296&&a<=57343){var c=t.charCodeAt(++s);a=65536+((a&1023)<<10)|c&1023}if(a<=127){if(r>=f)break;n[r++]=a}else if(a<=2047){if(r+1>=f)break;n[r++]=192|a>>6,n[r++]=128|a&63}else if(a<=65535){if(r+2>=f)break;n[r++]=224|a>>12,n[r++]=128|a>>6&63,n[r++]=128|a&63}else{if(r+3>=f)break;n[r++]=240|a>>18,n[r++]=128|a>>12&63,n[r++]=128|a>>6&63,n[r++]=128|a&63}}return n[r]=0,r-o}function Ft(t){for(var n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=55296&&i<=57343&&(i=65536+((i&1023)<<10)|t.charCodeAt(++r)&1023),i<=127?++n:i<=2047?n+=2:i<=65535?n+=3:n+=4}return n}function ut(t){var n=Ft(t)+1,r=Z(n);return St(t,U,r,n),r}function Pt(t,n,r){for(var i=0;i<t.length;++i)U[n++>>0]=t.charCodeAt(i);U[n>>0]=0}function Ct(t,n){return t%n>0&&(t+=n-t%n),t}var D,U,G,u;function ct(t){D=t,e.HEAP8=U=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=u=new Int32Array(t),e.HEAPU8=G=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var lt=e.INITIAL_MEMORY||16777216;e.wasmMemory?M=e.wasmMemory:M=new WebAssembly.Memory({initial:lt/65536,maximum:32768}),M&&(D=M.buffer),lt=D.byteLength,ct(D);var y,_t=[],pt=[],Ot=[],ht=[];function Ut(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Nt(e.preRun.shift());q(_t)}function kt(){q(pt)}function It(){q(Ot)}function xt(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Mt(e.postRun.shift());q(ht)}function Nt(t){_t.unshift(t)}function Mt(t){ht.unshift(t)}var H=0,z=null;function Ht(t){H++,e.monitorRunDependencies&&e.monitorRunDependencies(H)}function jt(t){if(H--,e.monitorRunDependencies&&e.monitorRunDependencies(H),H==0&&z){var n=z;z=null,n()}}e.preloadedImages={},e.preloadedAudios={};function L(t){e.onAbort&&e.onAbort(t),t+="",p(t),nt=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(t);throw S(n),n}function Wt(t,n){return String.prototype.startsWith?t.startsWith(n):t.indexOf(n)===0}var Bt="data:application/octet-stream;base64,";function vt(t){return Wt(t,Bt)}var k="scrabble.wasm";vt(k)||(k=tt(k));function mt(){try{if(C)return new Uint8Array(C);if(B)return B(k);throw"both async and sync fetching of the wasm failed"}catch(t){L(t)}}function Dt(){return!C&&(N||F)&&typeof fetch=="function"?fetch(k,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+k+"'";return t.arrayBuffer()}).catch(function(){return mt()}):Promise.resolve().then(mt)}function Gt(){var t={a:Rn};function n(s,a){var c=s.exports;e.asm=c,y=e.asm.N,jt()}Ht();function r(s){n(s.instance)}function i(s){return Dt().then(function(a){return WebAssembly.instantiate(a,t)}).then(s,function(a){p("failed to asynchronously prepare wasm: "+a),L(a)})}function o(){return!C&&typeof WebAssembly.instantiateStreaming=="function"&&!vt(k)&&typeof fetch=="function"?fetch(k,{credentials:"same-origin"}).then(function(s){var a=WebAssembly.instantiateStreaming(s,t);return a.then(r,function(c){return p("wasm streaming compile failed: "+c),p("falling back to ArrayBuffer instantiation"),i(r)})}):i(r)}if(e.instantiateWasm)try{var f=e.instantiateWasm(t,n);return f}catch(s){return p("Module.instantiateWasm callback failed with error: "+s),!1}return o().catch(S),{}}function q(t){for(;t.length>0;){var n=t.shift();if(typeof n=="function"){n(e);continue}var r=n.func;typeof r=="number"?n.arg===void 0?y.get(r)():y.get(r)(n.arg):r(n.arg===void 0?null:n.arg)}}function zt(t,n,r,i){L("Assertion failed: "+X(t)+", at: "+[n?X(n):"unknown filename",r,i?X(i):"unknown function"])}var g={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function Lt(t){return rt(t+g.SIZE)+g.SIZE}var Y=0;function J(t){this.excPtr=t,this.ptr=t-g.SIZE,this.set_type=function(n){u[this.ptr+g.TYPE_OFFSET>>2]=n},this.get_type=function(){return u[this.ptr+g.TYPE_OFFSET>>2]},this.set_destructor=function(n){u[this.ptr+g.DESTRUCTOR_OFFSET>>2]=n},this.get_destructor=function(){return u[this.ptr+g.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(n){u[this.ptr+g.REFCOUNT_OFFSET>>2]=n},this.set_caught=function(n){n=n?1:0,U[this.ptr+g.CAUGHT_OFFSET>>0]=n},this.get_caught=function(){return U[this.ptr+g.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(n){n=n?1:0,U[this.ptr+g.RETHROWN_OFFSET>>0]=n},this.get_rethrown=function(){return U[this.ptr+g.RETHROWN_OFFSET>>0]!=0},this.init=function(n,r){this.set_type(n),this.set_destructor(r),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var n=u[this.ptr+g.REFCOUNT_OFFSET>>2];u[this.ptr+g.REFCOUNT_OFFSET>>2]=n+1},this.release_ref=function(){var n=u[this.ptr+g.REFCOUNT_OFFSET>>2];return u[this.ptr+g.REFCOUNT_OFFSET>>2]=n-1,n===1}}function et(t){this.free=function(){Rt(this.ptr),this.ptr=0},this.set_base_ptr=function(n){u[this.ptr>>2]=n},this.get_base_ptr=function(){return u[this.ptr>>2]},this.set_adjusted_ptr=function(n){var r=4;u[this.ptr+r>>2]=n},this.get_adjusted_ptr=function(){var n=4;return u[this.ptr+n>>2]},this.get_exception_ptr=function(){var n=___cxa_is_pointer_type(this.get_exception_info().get_type());if(n)return u[this.get_base_ptr()>>2];var r=this.get_adjusted_ptr();return r!==0?r:this.get_base_ptr()},this.get_exception_info=function(){return new J(this.get_base_ptr())},t===void 0?(this.ptr=rt(8),this.set_adjusted_ptr(0)):this.ptr=t}function Yt(t){var n=new et(t),r=n.get_base_ptr();throw Y||(Y=r),n.free(),r}function Vt(){var t=Y;if(!t)return m(0),0;var n=new J(t),r=n.get_type(),i=new et;if(i.set_base_ptr(t),!r)return m(0),i.ptr|0;var o=Array.prototype.slice.call(arguments),f=d(),s=Z(4);u[s>>2]=t;for(var a=0;a<o.length;a++){var c=o[a];if(c===0||c===r)break;if(___cxa_can_catch(c,r,s)){var I=u[s>>2];return t!==I&&i.set_adjusted_ptr(I),m(c|0),i.ptr|0}}return w(f),m(r|0),i.ptr|0}function Zt(){var t=Y;if(!t)return m(0),0;var n=new J(t),r=n.get_type(),i=new et;if(i.set_base_ptr(t),!r)return m(0),i.ptr|0;var o=Array.prototype.slice.call(arguments),f=d(),s=Z(4);u[s>>2]=t;for(var a=0;a<o.length;a++){var c=o[a];if(c===0||c===r)break;if(___cxa_can_catch(c,r,s)){var I=u[s>>2];return t!==I&&i.set_adjusted_ptr(I),m(c|0),i.ptr|0}}return w(f),m(r|0),i.ptr|0}function Kt(t,n,r){var i=new J(t);throw i.init(n,r),Y=t,t}var Q={mappings:{},buffers:[null,[],[]],printChar:function(t,n){var r=Q.buffers[t];n===0||n===10?((t===1?_:p)(ft(r,0)),r.length=0):r.push(n)},varargs:void 0,get:function(){Q.varargs+=4;var t=u[Q.varargs-4>>2];return t},getStr:function(t){var n=X(t);return n},get64:function(t,n){return t}};function Xt(t,n){}function qt(t,n){return wt(n,0,136),u[n>>2]=1,u[n+4>>2]=2,u[n+8>>2]=3,u[n+12>>2]=4,0}function Jt(){L()}var gt;gt=function(){return performance.now()};var Qt=!0;function $t(t){return u[Et()>>2]=t,t}function tn(t,n){var r;if(t===0)r=Date.now();else if((t===1||t===4)&&Qt)r=gt();else return $t(28),-1;return u[n>>2]=r/1e3|0,u[n+4>>2]=r%1e3*1e3*1e3|0,0}function nn(t,n,r){G.copyWithin(t,n,n+r)}function en(){return G.length}function rn(t){try{return M.grow(t-D.byteLength+65535>>>16),ct(M.buffer),1}catch{}}function an(t){t=t>>>0;var n=en(),r=2147483648;if(t>r)return!1;for(var i=16777216,o=1;o<=4;o*=2){var f=n*(1+.2/o);f=Math.min(f,t+100663296);var s=Math.min(r,Ct(Math.max(i,t,f),65536)),a=rn(s);if(a)return!0}return!1}var yt={};function on(){return j||"./this.program"}function V(){if(!V.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:on()};for(var r in yt)n[r]=yt[r];var i=[];for(var r in n)i.push(r+"="+n[r]);V.strings=i}return V.strings}function sn(t,n){var r=0;return V().forEach(function(i,o){var f=n+r;u[t+o*4>>2]=f,Pt(i,f),r+=i.length+1}),0}function fn(t,n){var r=V();u[t>>2]=r.length;var i=0;return r.forEach(function(o){i+=o.length+1}),u[n>>2]=i,0}function un(t){Tt(t)}function cn(t,n,r,i){for(var o=0,f=0;f<r;f++){for(var s=u[n+f*8>>2],a=u[n+(f*8+4)>>2],c=0;c<a;c++)Q.printChar(t,G[s+c]);o+=a}return u[i>>2]=o,0}function ln(){return P()|0}function _n(t){return t}function pn(){return 0}function hn(){return 0}function vn(){return 0}function mn(){}function gn(){}function yn(){}function dn(){return 0}function wn(){return 0}function En(){return 0}pt.push({func:function(){dt()}});var Rn={b:zt,h:Lt,d:Vt,q:Zt,g:Kt,e:Yt,B:Xt,C:qt,l:Jt,G:tn,x:nn,y:an,z:sn,A:fn,m:un,t:cn,c:ln,k:Pn,r:Fn,n:kn,I:Un,o:On,f:Tn,i:bn,j:An,M:Sn,p:Cn,H:In,u:_n,a:M,J:pn,L:hn,K:vn,v:mn,F:gn,E:yn,w:dn,D:wn,s:En};Gt();var dt=e.___wasm_call_ctors=function(){return(dt=e.___wasm_call_ctors=e.asm.O).apply(null,arguments)};e._solve_scrabble=function(){return(e._solve_scrabble=e.asm.P).apply(null,arguments)},e._main=function(){return(e._main=e.asm.Q).apply(null,arguments)};var wt=e._memset=function(){return(wt=e._memset=e.asm.R).apply(null,arguments)};e._Glucose_CallCustomPropagatorInitialize=function(){return(e._Glucose_CallCustomPropagatorInitialize=e.asm.S).apply(null,arguments)},e._Glucose_CallCustomPropagatorPropagate=function(){return(e._Glucose_CallCustomPropagatorPropagate=e.asm.T).apply(null,arguments)},e._Glucose_CallCustomPropagatorCalcReason=function(){return(e._Glucose_CallCustomPropagatorCalcReason=e.asm.U).apply(null,arguments)},e._Glucose_CallCustomPropagatorUndo=function(){return(e._Glucose_CallCustomPropagatorUndo=e.asm.V).apply(null,arguments)};var Et=e.___errno_location=function(){return(Et=e.___errno_location=e.asm.W).apply(null,arguments)},Rt=e._free=function(){return(Rt=e._free=e.asm.X).apply(null,arguments)},rt=e._malloc=function(){return(rt=e._malloc=e.asm.Y).apply(null,arguments)},d=e.stackSave=function(){return(d=e.stackSave=e.asm.Z).apply(null,arguments)},w=e.stackRestore=function(){return(w=e.stackRestore=e.asm._).apply(null,arguments)},Z=e.stackAlloc=function(){return(Z=e.stackAlloc=e.asm.$).apply(null,arguments)},T=e._setThrew=function(){return(T=e._setThrew=e.asm.aa).apply(null,arguments)};function An(t,n,r,i){var o=d();try{y.get(t)(n,r,i)}catch(f){if(w(o),f!==f+0&&f!=="longjmp")throw f;T(1,0)}}function Tn(t,n){var r=d();try{y.get(t)(n)}catch(i){if(w(r),i!==i+0&&i!=="longjmp")throw i;T(1,0)}}function bn(t,n,r){var i=d();try{y.get(t)(n,r)}catch(o){if(w(i),o!==o+0&&o!=="longjmp")throw o;T(1,0)}}function Sn(t,n,r,i,o){var f=d();try{y.get(t)(n,r,i,o)}catch(s){if(w(f),s!==s+0&&s!=="longjmp")throw s;T(1,0)}}function Fn(t,n,r){var i=d();try{return y.get(t)(n,r)}catch(o){if(w(i),o!==o+0&&o!=="longjmp")throw o;T(1,0)}}function Pn(t,n){var r=d();try{return y.get(t)(n)}catch(i){if(w(r),i!==i+0&&i!=="longjmp")throw i;T(1,0)}}function Cn(t,n,r,i,o,f){var s=d();try{y.get(t)(n,r,i,o,f)}catch(a){if(w(s),a!==a+0&&a!=="longjmp")throw a;T(1,0)}}function On(t){var n=d();try{y.get(t)()}catch(r){if(w(n),r!==r+0&&r!=="longjmp")throw r;T(1,0)}}function Un(t,n,r,i,o,f){var s=d();try{return y.get(t)(n,r,i,o,f)}catch(a){if(w(s),a!==a+0&&a!=="longjmp")throw a;T(1,0)}}function kn(t,n,r,i){var o=d();try{return y.get(t)(n,r,i)}catch(f){if(w(o),f!==f+0&&f!=="longjmp")throw f;T(1,0)}}function In(t,n,r,i,o,f,s){var a=d();try{y.get(t)(n,r,i,o,f,s)}catch(c){if(w(a),c!==c+0&&c!=="longjmp")throw c;T(1,0)}}var $;function At(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}z=function t(){$||it(),$||(z=t)};function xn(t){var n=e._main;t=t||[];var r=t.length+1,i=Z((r+1)*4);u[i>>2]=ut(j);for(var o=1;o<r;o++)u[(i>>2)+o]=ut(t[o-1]);u[(i>>2)+r]=0;try{var f=n(r,i);Tt(f,!0)}catch(a){if(a instanceof At)return;if(a=="unwind"){O=!0;return}else{var s=a;a&&typeof a=="object"&&a.stack&&(s=[a,a.stack]),p("exception thrown: "+s),W(1,a)}}finally{}}function it(t){if(t=t||x,H>0||(Ut(),H>0))return;function n(){$||($=!0,e.calledRun=!0,!nt&&(kt(),It(),K(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),bt&&xn(t),xt()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),n()},1)):n()}e.run=it;function Tt(t,n){n&&O&&t===0||(O||(e.onExit&&e.onExit(t),nt=!0),W(t,new At(t)))}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();var bt=!0;return e.noInitialRun&&(bt=!1),O=!0,it(),e.ready}}();let E=null;function ot(R,b,e,K){const S=R.length,A=R[0].length;if(!(S<=255&&A<=255))throw new Error("Board is too large");const l=[];l.push(S),l.push(A);const x=new Map,j=[],W=function(_){return x.has(_)||(x.set(_,x.size),j.push(_)),x.get(_)};for(let _=0;_<S;++_)for(let p=0;p<A;++p){let v=-1;R[_][p]===null?v=0:R[_][p]===" "?v=1:v=W(R[_][p])+2,l.push(v&255),l.push(v>>8&255)}const N=b.length;l.push(N&255),l.push(N>>8&255);for(let _=0;_<N;++_){const p=b[_],v=p.length;if(!(v<=255))throw new Error("Word is too long");l.push(v);for(let m=0;m<v;++m){const P=W(p[m]);l.push(P&255),l.push(P>>8&255)}}const F=E._malloc(l.length);E.HEAPU8.set(l,F);const h=E._solve_scrabble(F,l.length,K,e?1:0);E._free(F);const tt=E.HEAPU8[h]|E.HEAPU8[h+1]<<8|E.HEAPU8[h+2]<<16|E.HEAPU8[h+3]<<24,B=[];for(let _=0;_<tt;++_){const p=[];for(let v=0;v<S;++v){const m=[];for(let P=0;P<A;++P){const C=h+4+_*S*A*2+v*A*2+P*2,O=E.HEAPU8[C]|E.HEAPU8[C+1]<<8;O===0?m.push(" "):m.push(j[O-1])}p.push(m)}B.push(p)}self.postMessage(B)}self.onmessage=function(R){const b=R.data;E?ot(b.board,b.words,b.allShown,b.numMaxAnswers):at().then(e=>{E=e,ot(b.board,b.words,b.allShown,b.numMaxAnswers)})},at().then(R=>{E=R})})();
